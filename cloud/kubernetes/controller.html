<!DOCTYPE html>
<html>
	<head>
		<title>controller.org</title>
		<link rel="stylesheet" href="/diary/resources/css/main.css" />
		<script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
		<script src="/diary/resources/js/swgen.js"></script>
	</head>
	<body>
		<nav id='content'>
		</nav>
		<section class="main-article-area">
			<div id='main'>
				<h1 id="overview">Overview</h1>
<p>Conclude how to</p>
<ol class="incremental">
<li>create Custom Resource with Custom Resource Defnition</li>
<li>add/update/delete Custom Resource</li>
<li>create custom controller and associate it with the new created custom resource</li>
</ol>
<p>See <a href="https://github.com/kubernetes/sample-controller" class="uri">https://github.com/kubernetes/sample-controller</a> for details</p>
<h1 id="create-custom-resource">Create Custom Resource</h1>
<h2 id="create-namespace">Create Namespace</h2>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">apiVersion:</span><span class="at"> v1</span>
<span class="fu">kind:</span><span class="at"> Namespace</span>
<span class="fu">metadata:</span>
  <span class="fu">name:</span><span class="at"> larry</span></code></pre></div>
<h2 id="create-customresourcedefinition">Create CustomResourceDefinition</h2>
<p>CRD is not namespaced (but scoped)</p>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">apiVersion:</span><span class="at"> apiextensions.k8s.io/v1beta1</span>
<span class="fu">kind:</span><span class="at"> CustomResourceDefinition</span>
<span class="fu">metadata:</span>
  <span class="fu">name:</span><span class="at"> foos.samplecontroller.k8s.io</span>
<span class="fu">spec:</span>
  <span class="fu">group:</span><span class="at"> samplecontroller.k8s.io</span>
  <span class="fu">version:</span><span class="at"> v1alpha</span>
  <span class="fu">names:</span>
    <span class="fu">kind:</span><span class="at"> Foo</span>
    <span class="fu">plural:</span><span class="at"> foos</span>
  <span class="fu">scope:</span><span class="at"> Namespaced</span>
</code></pre></div>
<h2 id="create-customresource-foo">Create CustomResource Foo</h2>
<div class="sourceCode"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="fu">apiVersion:</span><span class="at"> samplecontroller.k8s.io/v1alpha</span>
<span class="fu">kind:</span><span class="at"> Foo</span>
<span class="fu">metadata:</span>
  <span class="fu">name:</span><span class="at"> example-foo</span>
  <span class="fu">namespace:</span><span class="at"> larry</span>
<span class="fu">spec:</span>
  <span class="fu">deploymentName:</span><span class="at"> example-foo</span>
  <span class="fu">replicas:</span><span class="at"> 1</span></code></pre></div>
<h2 id="check-the-foo-objects">Check the Foo objects</h2>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">kubectl</span> get foos example-foo -n larry -o yaml</code></pre></div>
<h1 id="define-custom-resource-spec-for-controller">Define Custom Resource Spec for Controller</h1>
<h1 id="validation"><span class="todo TODO">TODO</span> Validation</h1>
<p>CustomResourceValidation</p>

			</div>
		</section>
	</body>
</html>

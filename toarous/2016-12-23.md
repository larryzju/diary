# 可执行文件

## section

* Text/Code
* Data
* BSS(Block Started Symbol)，用于保存未初始化的全局变量，用于节省存储空间

## 文件格式

* ELF ( Executable and Linker Format )
* a.out: 传统的 unix 文件格式
* COFF( Common Object File Format ) 和 PE( Portable Executable )

# ELF 文件格式 

ELF 是 linux 默认格式，PE 是 Windows 默认格式。

1. 可以有任意多个 section
2. 每个 section 可以有自己的特征
3. 有利于 dynamic link
4. 有利于 debug

使用 `readelf --header <file>` 或 `objdump --disassemble` 命令来查看文件的 ELF 相关信息。

ELF 文件格式可以参考 `/usr/include/elf.h`，文件以 `Ehdr` 头信息开始，保存了 ELF 硬件类型和版本信息

	ELF Header:
	  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00
	  Class:                             ELF64
	  Data:                              2's complement, little endian
	  Version:                           1 (current)
	  OS/ABI:                            UNIX - System V
	  ABI Version:                       0
	  Type:                              EXEC (Executable file)
	  Machine:                           Advanced Micro Devices X86-64
	  Version:                           0x1
	  Entry point address:               0x404030
	  Start of program headers:          64 (bytes into file)
	  Start of section headers:          124688 (bytes into file)
	  Flags:                             0x0
	  Size of this header:               64 (bytes)
	  Size of program headers:           56 (bytes)
	  Number of program headers:         9
	  Size of section headers:           64 (bytes)
	  Number of section headers:         28
	  Section header string table index: 27

> Magic 为魔数值，`0x7f` + `ELF` 标识这种文件类型


# 参考资料

* [binary format](http://www.bottomupcs.com/chapter07.xhtml)

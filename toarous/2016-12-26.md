# 数据类型

计算机能做的全部工作可以归结为对数据的存储、检查和处理

内存是有唯一地址的字节的有序阵列。

## 大端与小端问题

数据的最低有效字节放在相邻字节的地址最低位称为 **小端**，反之称为 **大端**

80386 采用折是小端序（也称为低址结尾）

> MSB（最高有效位），LSB（最低有效位）

## 符号的表示

表示带符号整数的方法有以下四种：

. 偏移值（Biased Numbers）
. 带符号的值（Sign Magnitude）
. 二进制反码（One's Complement）
. 二进制补码（Tow's Complement）

8086 系列统一使用二进制补码，二进制补码易于实现，通过用于无符号数的简单加法器就能实现负数到二进制被码的转换。


## 浮点数处理

> 80387 是 80386 的协处理器

在计算机里，用来表示数的位数是有限的，所以计算机不能精确地表示出所有的实数。而只能表示无穷个实数中的一个极小的子集。然而，就是这个子集，已经可以解决极大多数的实际问题，而且丢掉的精度也是微不足道的。所谓“浮点数”，就是实数类型数据的计算机表示法。

> ### 实数与浮点数
> 
> “实数”描写一个数的集合的数学术语；而“浮点”则是计算机用来表示实数的一个子集的数据类型
>
> 与浮点数相对的是“定点数”，约定好后N位为小数，这种方式表示数的范围是固定的（小数的步长是一定的）。浮点数因为二进制小数点可以浮动，因而得名

浮点数实际上是靠两个整数来表示的，一个保持数据的有效数字，一个规定了二进制小数点的位置。但纯软件实现浮点数运算，其速度慢得无法忍受，所以通过 80387 协处理器来提供浮点运算硬件支持

> IEEE 浮点标准

80387 也支持整数数据类型，因此混合整数和浮点数运算，而以只在 80387 完成，省掉了 80387 和 80386 之间的数据传送

80387 支持三类实数格式:

数据类型 | 总位数 | 符号位 | 指数字段 | 有效数字段
-------- | ------ | ------ | -------- | -------------
短实型数 | 32     | 1      | 8        | 23
长实型数 | 62     | 1      | 11       | 52
临时实型数 | 80   | 1      | 15       | 64

有效数字也被称为 **尾数**，80387 约定：任何实型数只能用下面的格式来表示:（ 在二进制小数的左边，有且仅有一位，而且该位永远为 1，“1” 在记录中被省略）

	1.xxxxx x 2^n

指数字段是用偏移法来表示带符号的整数，较反码或补码，比较大小比较直观

除了正常数（Normals）以外，还存在有：

* Zero
* Denormals（微小数）
* Pseudo Denormals（伪微小数）
* Infinities
* SignalingNan（信号的非数字）
* Quiet Nan(静的非数字）

# 机器状态和存储器寻址

机器指令直接对基本的数据类型进行操作。每条机器指令指定了要执行的操作，以及参与操作的输入或输出的数据的位置。输入或输出的数据叫做操作数。

操作数可以在寄存器中，或者在处理器外的主存储器中，或者在I/O存储器中，或者在指令中作为程序立即常数的数据。

## 寄存器

应用程序可用的寄存器组由 16 个寄存器组成，分为三类：

. 用于算术和逻辑运算的 8 个 32 位通用寄存器，也可用于基址和变址寻址时存放地址
. 两个处理器控制寄存器
. 6  个 16 位的段寄存器，用来寻址存储器的段

> 386 寄存器的名字是由老的 16 位寄存器的名字之前冠以 `E`组成

### 通用寄存器

8 个 32 位通用寄存器，分别是 `EAX`, `ECX`, `EDX`, `EBX`, `ESP`, `EBP`, `ESI` 和 `EDI`。

通用寄存器的低 16 位可以作为 16 位的寄存器独立访问。并将之命名为 `AX`, `CX`,`DX`, `BX`, `SP`, `BP`, `SI`, `DI`

`AX`, `BX`, `CX`, `DX` 的高半和低半个寄存器可以作为 8 位的寄存器来独立访问，后缀以 `H` 和 `L` 表示，如 `AL`, `BH`



<!DOCTYPE html>
<html>
	<head>
		<title>malloc.org</title>
		<link rel="stylesheet" href="/diary/resources/css/main.css" />
		<link rel="stylesheet" href="/diary/resources/highlight/styles/default.css" />
		<script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
		<script src="/diary/resources/js/swgen.js"></script>
		<script src="/diary/resources/highlight/highlight.pack.js"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body>
		<nav id='content'>
		</nav>
		<section class="main-article-area">
			<div id='main'>
				<h1 id="overview">Overview</h1>
<h2 id="brk-and-sbrk">brk and sbrk</h2>
<p>A process has several segments of memory<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<ul class="incremental">
<li>Code (text) segmemnt, which contains the code to be executed</li>
<li>Data segment, which contains data the compiler knows about (globals and statics)</li>
<li>Stack segment, which contains (drumroll..) the stack</li>
</ul>
<p>The <code>brk()</code> system call is used to change th point where the data segment "breaks" (ends). And <code>sbrk(intptr_t increment)</code> increments the program's data space by <code>increment</code> bytes.</p>
<p>Heap is memory block with a contiguous series of addresses. Program can expand or contract and use as its own accord (system break).</p>
<p>POSIX <code>sbrk</code> API is used to move the system break. But normally, program use a <strong>memory allocation system</strong> to handle chuncking up and keeping track of which memory is allocated and which is freed.</p>
<p>C API for memory allocation</p>
<dl class="incremental">
<dt><code>malloc(size_t bytes)</code></dt>
<dd>reverse a contiguous block of memory
</dd>
<dt><code>realloc(void *space, size_t bytes)</code></dt>
<dd>resize an existing memory allocation
</dd>
<dt><code>calloc(size_t nmemb, size_t size)</code></dt>
<dd>initialize memory contents to zero
</dd>
<dt><code>free(void *ptr)</code></dt>
<dd>make it available for use in the subsequent calls to the other allocation functions
</dd>
</dl>
<p>Call <code>sbrk</code> to increase the size of the heap. For typical architectures the heap will grow upwards and the stack grows downwards.</p>
<h2 id="program-break">program break</h2>
<h1 id="todo"><span class="todo TODO">TODO</span> TODO</h1>
<h2 id="mmap">mmap</h2>
<h2 id="jemalloc">jemalloc</h2>
<h1 id="footnotes">Footnotes</h1>
<ul class="incremental">
<li></li>
</ul>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><a href="https://stackoverflow.com/questions/6338162/what-is-program-break-where-does-it-start-from-0x00">Stackoverflow: What is program break? Where does it start from, 0x00?</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

			</div>
		</section>
	</body>
</html>

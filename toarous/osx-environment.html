<!DOCTYPE html>
<html>
	<head>
		<title>osx-environment.org</title>
		<link rel="stylesheet" href="/diary/resources/css/main.css" />
		<link rel="stylesheet" href="/diary/resources/highlight/styles/default.css" />
		<script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
		<script src="/diary/resources/js/swgen.js"></script>
		<script src="/diary/resources/highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body>
		<nav id='content'>
		</nav>
		<section class="main-article-area">
			<div id='main'>
				<h1 id="安装流程">安装流程</h1>
<p>参考 <a href="http://wiki.osdev.org/GCC_Cross-Compiler#OS_X_Users" class="uri">http://wiki.osdev.org/GCC_Cross-Compiler#OS_X_Users</a></p>
<p>主要流程如下：</p>
<ol class="incremental">
<li>brew 安装 gcc 编译器 :: <code>brew install gcc</code></li>
<li>下载并编译安装 binutils （指定 target 为 <code>i386-elf</code> ）</li>
<li>下载并编译安装 gcc （指定 target 为 <code>i386-elf</code> ）</li>
</ol>
<p>可以将 prefix 指定到 <code>/usr/loca/i386elfgcc</code> 目录，并将 $prefix/bin 目录下的可执行文件链接为正常的名称</p>
<pre><code>cd /usr/local/i386elfgcc/bin/;
for b in `ls /usr/local/i386elfgcc/bin/`; do 
  ln -s $PWD/$b ${b#i386-elf-*};
done
</code></pre>
<h1 id="编译-toaruos">编译 toaruos</h1>
<ol class="incremental">
<li>指定 gcc 编译器路径： <code>export PATH=/usr/local/i386elfgcc/bin:$PATH</code></li>
<li>编译 make</li>
</ol>
<h1 id="模拟执行">模拟执行</h1>
<ol class="incremental">
<li>安装 qemu: <code>brew install qemu</code></li>
<li>执行： <code>qemu-system-i386 -kernel kernel</code></li>
</ol>

			</div>
		</section>
	</body>
</html>

<!DOCTYPE html>
<html>
	<head>
		<title>git.org</title>
		<link rel="stylesheet" href="/diary/resources/css/main.css" />
		<link rel="stylesheet" href="/diary/resources/highlight/styles/default.css" />
		<script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
		<script src="/diary/resources/js/swgen.js"></script>
		<script src="/diary/resources/highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body>
		<nav id='content'>
		</nav>
		<section class="main-article-area">
			<div id='main'>
				<h1 id="commit">Commit</h1>
<h2 id="objects"><span class="todo TODO">TODO</span> Objects</h2>
<dl class="incremental">
<dt>blobs</dt>
<dd>file contents
</dd>
<dt>tree object</dt>
<dd>collection of blob
</dd>
<dt>commit object</dt>
<dd>metadata (author, committer, parent) and pointer to the root project tree object
</dd>
</dl>
<h1 id="branch">Branch</h1>
<h2 id="why-so-fast">Why so fast?</h2>
<p>Git stores a <em>commit object</em> that contains a pointer to the snapshot of the content you staged.</p>
<p>Commit object contains:</p>
<ul class="incremental">
<li>author's name and email address</li>
<li>commit message</li>
<li>pointer to the commit, and parent(s) commit
<ul class="incremental">
<li>zero parents for the initial commit</li>
<li>one parent for a normal commit</li>
<li>multiple parents for a commit that results from a merge of two or more branches</li>
</ul></li>
</ul>
<p>A branch is simply a lightweight movable pointer to one of these commits:</p>
<ul class="incremental">
<li>create a new branch is equal to creating a new pointer for you to move around.</li>
</ul>
<h3 id="can-a-commit-has-more-than-two-parents"><span class="todo TODO">TODO</span> Can a commit has more than two parents?</h3>
<h2 id="term">Term</h2>
<dl class="incremental">
<dt>master</dt>
<dd>default branch name
</dd>
<dt>HEAD</dt>
<dd>special pointer pointer to current branch
</dd>
</dl>
<h2 id="switch-branch">Switch Branch</h2>
<p><code>git checkout master</code> does two things:</p>
<ol class="incremental">
<li>move the HEAD pointer back to point to the <code>master</code> branch</li>
<li>revert the files in your working directory back to the snapshot that <code>master</code> points to</li>
</ol>
<h2 id="divergent">Divergent</h2>
<figure>
<img src="https://git-scm.com/book/en/v2/images/advance-master.png" alt="" /><figcaption>Divergent history</figcaption>
</figure>
<h2 id="basic-workflow">Basic Workflow</h2>
<dl class="incremental">
<dt>create a feature branch <code>iss53</code></dt>
<dd><code>git checkout -b iss53</code>
</dd>
<dt>work on and commit as normal</dt>
<dd><code>git commit -a -m &lt;msg&gt;</code>
</dd>
<dt>switch to master branch when we need to make hotfix</dt>
<dd><code>git checkout master</code>
</dd>
<dt>create a hotfix branch</dt>
<dd><code>git checkout -b hotfix</code>
</dd>
<dt>make the fix and commit</dt>
<dd><code>git commit -a -m &lt;hotfixmsg&gt;</code>
</dd>
<dt>merge <code>hotfix</code> branch back into <code>master</code> branch</dt>
<dd><code>git checkout master &amp;&amp; git merge hotfix</code>
</dd>
<dt>deploy and then delete <code>hotfix</code> branch</dt>
<dd><code>git branch -d hotfix</code>
</dd>
<dt>go back to the iss53 branch and continue working on it</dt>
<dd><code>git checkout iss53</code>
</dd>
<dt>you can also merge the <code>master</code> branch into <code>iss53</code> if you what</dt>
<dd><code>git merge master</code>
</dd>
</dl>
<h2 id="merge">Merge</h2>
<h3 id="fast-forward">Fast Forward</h3>
<p>When you try to merge one commit with a commit that can be reached by following the first commit's history, Git simplifies things by moving the pointer forward because there is no divergent work to merge together.</p>
<h3 id="basic-merging">Basic Merging</h3>
<figure>
<img src="https://git-scm.com/book/en/v2/images/basic-merging-1.png" alt="" /><figcaption>Three-way merge</figcaption>
</figure>
<p>The three snapshots are</p>
<ol class="incremental">
<li>two snapshots pointed to by the branch tips</li>
<li>common ancestor of the two</li>
</ol>
<p>Git creates a new snapshot that results from this three-way merge and automatically creates a new commit that points to it. (This is referred to as a merge commit, and is special in that it has more than one parent).</p>
<figure>
<img src="https://git-scm.com/book/en/v2/images/basic-merging-2.png" alt="" /><figcaption>Merge commit</figcaption>
</figure>
<h2 id="stashing-and-cleaning"><span class="todo TODO">TODO</span> Stashing and Cleaning</h2>
<h2 id="cookbook">Cookbook</h2>
<dl class="incremental">
<dt>create a branch but don't switch to it</dt>
<dd><code>git branch &lt;name&gt;</code>
</dd>
<dt>create a branch and switch to it</dt>
<dd><code>git checkout -b &lt;newbranchname&gt;</code>
</dd>
<dt>switch branch</dt>
<dd><code>git checkout testing</code>
</dd>
<dt>show where the branch pointers are pointing</dt>
<dd><code>git log --decorate</code>
</dd>
<dt>show all history</dt>
<dd><code>git log --oneline --decorate --graph --all</code>
</dd>
</dl>
<h1 id="配置">配置</h1>
<h2 id="git-status-octal">git status octal</h2>
<p>默认 git status 显示的 utf8 中文名是以 octal 显示的，需要进行如下设置</p>
<pre class="shell"><code>git config --global core.quotepath off
</code></pre>
<h1 id="未完成">未完成</h1>
<ul class="incremental">
<li>Git revert 如何看以后的版本？ `reflog` 合集</li>
<li>soft 与 hard 与 mixed 的区别？</li>
<li>`git checkout – file` 丢弃工作区修改（从缓存区）</li>
<li>`git reset HEAD file` 从提交中</li>
<li>HEAD 指向 master，master 指向当前提交</li>
<li>`git stash {apply,drop,pop,list}</li>
<li>`git branch –set-upstream &lt;branch-name&gt; &lt;origin/branch-name&gt;`: 本地分支与远程进行关联</li>
</ul>
<h1 id="reference">Reference</h1>
<ul class="incremental">
<li><a href="~/diary/book/git%E6%95%99%E7%A8%8B.org">Git 教程笔记</a></li>
<li><a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">Git branching</a></li>
</ul>

			</div>
		</section>
	</body>
</html>

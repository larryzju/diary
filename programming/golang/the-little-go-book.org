#+TITLE: Note on "The little Go Book"
#+AUTHOR: Zhao WenBin

* 前言

** 为什么不愿意学习新的语言

1. 语言相对基础，任何变动都会对上层产生影响
2. 语言细节多，学习涉及方方面面，付出与收效比例不相当

** 为什么要学习 go

- 语法和标准库相对简单
- 社区活跃
- 其它
  - 静态语言
  - 适合于系统级或大型应用级别的开发 

* 代码结构

- =${GOPATH}= 环境变量定义 workspace
- workspace 下保存目录代码和生成结果，如 =src=, =bin=, =pkg= 等 

* Basic

** 特点 

*** 编译型

- 编译速度快，能更快迭代
- 运行速度相对解释型快
- 无依赖

*** 静态类型

- 可以通过手动指定类型，或由编译器推导类型
- 编译时可以检查出很多错误，增强可靠性

*** 类 C 语法

- 去掉了 semi-colon terminated
- 去掉了 parenthese around conditions
- 在表示优先级时可以使用括号

*** GC

- keep track of values
- and free them when they're no longer used.













** running

- 使用 go run 来执行
- 使用 go build 来编译，生成可执行文件
- 入口是 main 包的 main 函数
- 非 main 包不能执行
- 非 main 包能 build，但不会生成可执行文件
- build 生成的可执行文件与源码同名

** Import

- 有一些默认的函数不需要导入，如 ~len~, ~cap~, ~println~
- =import= 用于导入指定字符串对应的包，可以一次导入多个
- 不允许未被使用的包的导入（会降低编译速度）
- 使用 godoc 来查看包及函数、类型的使用手册

** 变量与申明

- 使用 ~var~ 定义，类型在后
- 或者使用 ~:=~ 来定义局部变量，类型由值推导而来
- 默认会赋予 zero value
- 可以多变量赋值
- 不允许存在未被使用的变量

*** 注意

- ~:=~ 会阻止重复定义
- 但只要左值有一个是新的变量， ~:=~ 将允许赋值

** 函数声明

- 可以返回多个值
- 使用 blank identifier ( "_" ) 来忽略赋值
- 相同参数类型时，可以简写类型到最后（ shorter syntax ）
- Named return values

* Structure

** Overview

- Go 不支持继承 (inheritance), 不支持多态 (polymorphism) 和重载 (overloading)
- Go 提供 composition 功能
- 可以为结构体添加方法

** 声明与初始化

- =Struct{Key: value, Key2: value2,}= 构造结构体
- 也可以忽略键名，顺序传入参数构造结构体: =Struct{value, value2}=
- Go 默认以拷贝形式传参，通过指针避免拷贝结构体
- 使用 =&= 符号来通变量值的地址，使用 =*= 来取指针指向的对象
- 指针拷贝开销低，并且拷贝指针指向的内容还是原地址
- 指针是一个内存地址，指向实际变量值

** 方法

- =func(s *Struct) Func() {...}= 为结构体定义一个方法
- 其中 =*Struct= 被称为 =Func= 的接收者 (receiver)

** 构造器

- Go 中结构体没有构造器
- 实现一个普通函数来生成并返回结构体即可

** new 方法

- =new(X)= 等价于 =&X{}=
- 更习惯于使用后者


** 结构体成员

- 结构体成员称为 field
- 可以是任何类型：结构体，array, map, interface 或者 function

** Composition

- 将一个结构体包含于另一个
- 也称为 trait 或者 mixin
- 避免手工封闭子结构体及其方法
- 外部结构体可以复写(overwrite) 内部结构体的方法
- Composition 较之 inheritance 更健壮
- inheritance 方式下我们将更多关注继承关系，而非子类的行为

** 指针

- 时刻关注应该用“值”还是“指针”
- 值传递更安全，开销也更大




* Maps, Arrays and Slices

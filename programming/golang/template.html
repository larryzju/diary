<!DOCTYPE html>
<html>
	<head>
		<title>template.org</title>
		<link rel="stylesheet" href="/diary/resources/css/main.css" />
		<link rel="stylesheet" href="/diary/resources/highlight/styles/default.css" />
		<script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
		<script src="/diary/resources/js/swgen.js"></script>
		<script src="/diary/resources/highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body>
		<nav id='content'>
		</nav>
		<section class="main-article-area">
			<div id='main'>
				<h1 id="overview">Overview</h1>
<p>Template can evaluate with runtime variables to generate output.</p>
<p>Go provides <code>text/template</code> and <code>html/template</code>. The later contains protections for code injections.</p>
<p>Can be used in scenarios like</p>
<ol class="incremental">
<li>web page render (similar to jekyll's liquid, or hugo)</li>
<li>email</li>
<li>kubectl (wow, actually said k8s used <a href="https://github.com/spf13/cobra">cobra</a>)</li>
</ol>
<h1 id="usage">Usage</h1>
<ol class="incremental">
<li>create a new template object</li>
<li>parse from template files or strings</li>
<li>execute the template upon runtime context to generate output</li>
</ol>
<h1 id="example">Example</h1>
<div class="sourceCode"><pre class="sourceCode go"><code class="sourceCode go"><span class="kw">package</span> main

<span class="kw">import</span>(
        <span class="st">&quot;html/template&quot;</span>
        <span class="st">&quot;os&quot;</span>
)

<span class="kw">type</span> entry <span class="kw">struct</span> {
        N <span class="dt">int</span>
        V <span class="dt">uint64</span>
}

<span class="kw">const</span> tmpl = <span class="st">`</span>
<span class="st">&lt;html&gt;</span>
<span class="st">  &lt;table&gt;</span>
<span class="st">    &lt;tr&gt;</span>
<span class="st">      &lt;th&gt;n&lt;/th&gt;</span>
<span class="st">      &lt;th&gt;fib(n)&lt;/th&gt;</span>
<span class="st">    &lt;tr&gt;</span>
<span class="st">    {{range .}}</span>
<span class="st">    &lt;tr&gt;</span>
<span class="st">      &lt;td&gt;{{.N}}&lt;/td&gt;</span>
<span class="st">      &lt;td&gt;{{.V}}&lt;/td&gt;</span>
<span class="st">    &lt;/tr&gt;</span>
<span class="st">    {{end}}</span>
<span class="st">  &lt;/table&gt;</span>
<span class="st">&lt;/html&gt;</span>
<span class="st">`</span>

<span class="kw">func</span> main() {
        v := []entry{}
        <span class="kw">var</span> s, b <span class="dt">uint64</span> = <span class="dv">0</span>, <span class="dv">1</span>
        <span class="kw">for</span> i := <span class="dv">0</span>; i &lt; <span class="dv">30</span>; i++ {
                s, b = b, s+b
                v = <span class="bu">append</span>(v, entry{i+<span class="dv">1</span>,s})
        }

        t := template.Must(template.New(<span class="st">&quot;fib&quot;</span>).Parse(tmpl))
        t.Execute( os.Stdout, v )
}</code></pre></div>
<h1 id="syntax">Syntax</h1>
<p>Only <code>{{ action }}</code> will be evaluated and substituted.</p>
<p>The basic syntax are</p>
<ol class="incremental">
<li>data evaluation <code>{{.FieldName}}</code> for struct field visits or <code>{{.}}</code> for non-struct</li>
<li>conditions: <code>{{if .FieldName}} //action {{else}} //action2 {{end}}</code></li>
<li>loops: <code>{{ range .Member }} ... {{ end }}</code></li>
<li>functions, pipelines and variables: <code>|</code> or <code>with</code></li>
</ol>
<h1 id="misc">Misc</h1>
<dl class="incremental">
<dt><code>Must</code></dt>
<dd>verify and panic when error happens
</dd>
<dt><code>ParseFiles</code></dt>
<dd>parse multiple files
</dd>
<dt><code>ParseGlob</code></dt>
<dd>parse globbed files
</dd>
</dl>
<h1 id="todo"><span class="todo TODO">TODO</span> TODO</h1>
<h2 id="how-to-use-multiple-files-template">how to use multiple files template</h2>
<h2 id="cobra">Cobra</h2>

			</div>
		</section>
	</body>
</html>

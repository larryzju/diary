<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8"></meta>
    <title>derby.org</title>
    <link rel="stylesheet" href="/diary/resources/css/main.css" />
    <link rel="stylesheet" href="/diary/resources/highlight/styles/default.css" />
    <script src="/diary/resources/js/jquery-3.4.1.min.js"></script>
    <script src="/diary/resources/js/swgen.js"></script>
    <script src="/diary/resources/highlight/highlight.pack.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <section class="main-article-area">
      <nav id='content'>
	<span id="prev">
	  	
	</span>

	<span id="home"><a href="/diary">Home</a></span>
	<span id="Up">
	  
	  <a href="/diary/programming/java">Up: java</a>
	  	
	</span>

	<span id="next">
	  
	  <a href="/diary/programming/java/ivy-vs-maven.org.html">Next: ivy-vs-maven.org</a>
	  	
	</span>
      </nav>
      
      <div id='main'>
	<h1 id="derby-tutorial-备忘">derby tutorial 备忘</h1>
<h2 id="安装与验证">安装与验证</h2>
<ol class="incremental">
<li><p>解压</p></li>
<li><p>设置 <code>DERBY_INSTALL</code> 环境变量，并使用 <code>./bin/setXXXX</code> 来设置 CLASSPATH</p></li>
<li><p>或者手动设置 CLASSPATH</p>
<ul class="incremental">
<li>derby.jar: 基本的 embedded 服务</li>
<li>derbytools.jar: ij, sysinfo 工具</li>
<li>derbynet.jar: Network Server</li>
<li>derbyrun.jar: 服务管理</li>
</ul></li>
<li><p>使用 <code>java org.apache.derby.tools.sysinfo</code> 来验证</p></li>
</ol>
<h2 id="ij-命令">ij 命令</h2>
<blockquote>
<p>类似于 beeline 之于 hive</p>
</blockquote>
<p>通过 <code>java org.apache.derby.tools.ij</code> 进入</p>
<ul class="incremental">
<li><code>connect 'jdbc:derby:MyDbTest;create=true'</code></li>
<li><code>run 'my_file.sql'</code></li>
</ul>
<h2 id="embedded-vs-network-server">embedded vs network server</h2>
<ul class="incremental">
<li>嵌入模式下 derby 实例与 JDBC 运行在同一个 JVM 中，同一时刻只能有一个 JVM 操作库</li>
<li>network server 通过框架启动 derby 实例，并以 JDBC ( network client ) 方式处理多客户端请求</li>
</ul>
<h2 id="启动-network-server">启动 network server</h2>
<ul class="incremental">
<li><code>bin/startNetworkServer</code> 启动监听 1527 端口</li>
<li><code>java -jar derbyrun.jar server start</code></li>
</ul>

      </div>
    </section>
  </body>
</html>

#+TITLE: 《Kubernetes 权威指南》笔记
#+AUTHOR: Zhao Wenbin

* Kubernetes 入门

** TODO Kubernetes 是什么

** 为什么要用 Kubernetes

1. 集成形成复杂系统，节约运维成本
2. 微服务，内置负载均衡
3. 屏弊底层平台和硬件，可迁移往公有云
4. 水平扩展

** 从一个不简单的 Hello World 例子说起

*** 基本架构 

1. fronted (replica x 3)，由 PHP 读 redis-slave 和 写 redis-master 功能
2. redis-master，写入页面提交
3. redis-slave (replica x 2)，同步 redis-master，提供读写分离功能

*** kubernetes 组件

1. 3 种 RC (ReplicationController)
2. 3 种 Service
3. 3 + 1 + 2 个 Pod 实例

*** 补充

- ReplicationController 指定副本数
- Service 通过 LabelSelector 选中相应的 pods
- Redis-master 的 Service 为后续  Redis-slave Pods 设置了相应的环境变量（redis 主节点地址信息）


* 问题

** TODO etcd 与 k8s 的关系

** TODO =kube-apiserver=, =kube-controller-manager=, =kube-scheduler=, =kubelet=, =kube-proxy= 的关系
